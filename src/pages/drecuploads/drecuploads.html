<!--
  Generated template for the ModalPage page.
  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

    <ion-navbar>
      <ion-title>+ Add Drec Uploads </ion-title>
      <ion-buttons end>
        <button ion-button (click)="closeModal()">Close</button>
      </ion-buttons>
    </ion-navbar>
  
  </ion-header>
  
  
  <ion-content padding>
    <div class="agile-login">
      <div class="wrapper">        
        <form [formGroup]="drecuploadsForm" (submit)="insertdrecFileUpload()">
            <div class="modal-body">
                <ion-item>
                    <label>Select</label>
                    <input type="file" id="file" multiple (change)="onSelectFile($event)" />
                </ion-item>

            </div>
            <div class="modal-footer">                
                <button type="submit" color="secondary" style="float: right;" class="btn btn-primary">Upload</button>
            </div>
            <ion-input [(ngModel)]="LEASE_NUM" *ngFor="let drec of drecdata;"  type="hidden" value="{{drec.LEASE_NUM}}" [formControl]="drecuploadsForm.controls['LEASE_NUM']"></ion-input>
            <ion-input [(ngModel)]="FILE_TYPE" *ngFor="let drec of drecdata;"  type="hidden" value="{{drec.FILE_TYPE_ID}}" [formControl]="drecuploadsForm.controls['FILE_TYPE']"></ion-input>
        </form>
      </div>
    </div>
    <div class="agile-login" style="margin-top: inherit;">
        <div class="wrapper">
          <div class="col-md-12 w3ls-form">
            <div class="accordion" id="accordionExample">
              <div class="card" *ngFor="let item of drecuploadsdetails; index as i;" data-parent="#accordionExample">
                  <div class="card-header" id="headingComment" style="background-color:white;">
                      <a (click)=showUndoBtn(i) role="button">
                          {{1 + i}}. {{item.FILE_NAME}}              
                      </a>
                      <!-- <span style="float: right; padding-left: 20px;"><ion-icon color="danger" style="display: inline-block;font-size: 2.5em;" ios="ios-trash" md="md-trash" (click)= "DeleteDrecUploadedFile(item.LEASE_NUMBER,item.DREC_FILE_ID,item.FILE_NAME,item.DREC_FILE_TYPE)" ></ion-icon></span> -->
                      <span style="float: right; padding-left: 20px;"><ion-icon color="secondary" style="display: inline-block;font-size: 2.5em;" ios="ios-download" md="md-download" (click)="getfile(item.ROW_NO,item)"  ></ion-icon></span>
                  </div>
                  <div [attr.id]="'undoBtn'+i" *ngIf="showBtn===i" >
                    <div class="card-body card-bodynew">
                        <p role="row" style="text-align: left;background-color: #fdfdfd;">
                          Created User:  {{item.CREATED_BY_NAME}}
                        </p>
                        <p role="row" style="text-align: left;background-color: #fdfdfd;">
                          Created Date:  {{item.CREATED_ON |date:'dd-MMM-yyyy,HH:mm a'}}
                        </p>
                    </div>
                  </div>
              </div><br>
            </div>
          </div>
        </div>
      </div>
  </ion-content>